{"ast":null,"code":"import _classCallCheck from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";// ** create-user.component.js ** //\nimport React,{Component}from\"react\";import axios from\"axios\";import NavBar from\"./NavBar\";import{Link}from\"react-router-dom\";import\"react-toastify/dist/ReactToastify.css\";import ErrorAlert from\"./ErrorAlert\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.onChangeEmail=_this.onChangeEmail.bind(_assertThisInitialized(_this));_this.onChangePassword=_this.onChangePassword.bind(_assertThisInitialized(_this));_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));_this.state={email:\"\",password:\"\",errors:{email:\"\",password:\"\"},alert_message:\"\"};return _this;}_createClass(Login,[{key:\"onChangeEmail\",value:function onChangeEmail(e){var value=e.target.value;var errors=this.state.errors;errors.email=this.state.email===\" \"||value.length<3?\"email must contain 3 character\":\"\";var apos=value.indexOf(\"@\");var dotpos=value.lastIndexOf(\".\");if(apos<1||dotpos-apos<2){errors.email=\"please enter a valid email id\";}this.setState({email:e.target.value});}},{key:\"onChangePassword\",value:function onChangePassword(e){var value=e.target.value;var errors=this.state.errors;errors.password=value.length<6?\"password must contain atleast  6 character\":\"\";this.setState({password:e.target.value});}},{key:\"onSubmit\",value:function onSubmit(e){var _this2=this;e.preventDefault();var errors=this.state.errors;if(this.state.email===\"\"){errors.email=\"Can not be null\";}else if(this.state.password===\"\"){errors.password=\"Can not be null\";}else if(this.state.errors.email.length!==0){errors.email=this.state.errors.email;}else if(this.state.errors.password.length!==0){errors.password=this.state.errors.password;}var userObject={email:this.state.email,password:this.state.password};axios.post(\"/api/auth\",userObject).then(function(res){//console.log(res.data.id);\nlocalStorage.setItem(\"login\",JSON.stringify(res));localStorage.setItem(\"role\",res.data.role);localStorage.setItem(\"id\",res.data.id);localStorage.setItem(\"name\",res.data.name);//const a = localStorage.getItem(\"role\");\nconsole.log(res.data.id);return _this2.props.history.push(\"/\");}).catch(function(error){console.log(error.msg);if(_this2.state.errors.email.length===0&&_this2.state.errors.password.length===0){//toast.error(\"user not exists or username and password incorrect\");\n_this2.setState({alert_message:\"error\"});}// alert(error.errors);\n});this.setState({email:\"\",password:\"\"});}},{key:\"render\",value:function render(){var errors=this.state.errors;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(NavBar,null),/*#__PURE__*/React.createElement(\"div\",{className:\"wrapper m-5 \"},/*#__PURE__*/React.createElement(\"h1\",{style:{textAlign:\"center\",color:\"ButtonShadow\"}},\"Login\"),this.state.alert_message===\"error\"?/*#__PURE__*/React.createElement(ErrorAlert,null):\"\",/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.onSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group m-3\"},/*#__PURE__*/React.createElement(\"label\",{forhtml:\"email\"},\"Email\"),/*#__PURE__*/React.createElement(\"input\",{autoFocus:true,autoComplete:true,type:\"email\",id:\"email\",placeholder:\"Email\",value:this.state.email,onChange:this.onChangeEmail,className:\"form-control\"}),errors.email?/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger m-2\",role:\"alert\"},errors.email):\"\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group m-3 \"},/*#__PURE__*/React.createElement(\"label\",{forhtml:\"password\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{//autoFocus\nautoComplete:true,type:\"password\",id:\"password\",placeholder:\"Password\",value:this.state.password,onChange:this.onChangePassword,className:\"form-control\"}),errors.password?/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger m-2\",role:\"alert\"},errors.password):\"\"),this.state.errors.email.length===0&&this.state.errors.password.length===0?/*#__PURE__*/React.createElement(\"div\",{className:\"form-group m-3\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Login\",className:\"btn btn-success\"})):/*#__PURE__*/React.createElement(\"div\",{className:\"form-group m-3\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Login\",disabled:\"true\",className:\"btn btn-success\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:\"/forget-password\"},\"Forget Password\"),/*#__PURE__*/React.createElement(\"hr\",null),\" New_User ?\",/*#__PURE__*/React.createElement(Link,{to:\"/register\"},\"Register\")))));}}]);return Login;}(Component);export{Login as default};","map":{"version":3,"sources":["/home/rudra/Documents/Library-sql/frontend/src/components/Login.js"],"names":["React","Component","axios","NavBar","Link","ErrorAlert","Login","props","onChangeEmail","bind","onChangePassword","onSubmit","state","email","password","errors","alert_message","e","value","target","length","apos","indexOf","dotpos","lastIndexOf","setState","preventDefault","userObject","post","then","res","localStorage","setItem","JSON","stringify","data","role","id","name","console","log","history","push","catch","error","msg","textAlign","color"],"mappings":"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","sourcesContent":["// ** create-user.component.js ** //\n\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport NavBar from \"./NavBar\";\nimport { Link } from \"react-router-dom\";\n\nimport \"react-toastify/dist/ReactToastify.css\";\nimport ErrorAlert from \"./ErrorAlert\";\n\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChangeEmail = this.onChangeEmail.bind(this);\n    this.onChangePassword = this.onChangePassword.bind(this);\n\n    this.onSubmit = this.onSubmit.bind(this);\n\n    this.state = {\n      email: \"\",\n      password: \"\",\n      errors: {\n        email: \"\",\n        password: \"\",\n      },\n      alert_message: \"\",\n    };\n  }\n\n  onChangeEmail(e) {\n    let value = e.target.value;\n    let errors = this.state.errors;\n    errors.email =\n      this.state.email === \" \" || value.length < 3\n        ? \"email must contain 3 character\"\n        : \"\";\n    let apos = value.indexOf(\"@\");\n    let dotpos = value.lastIndexOf(\".\");\n    if (apos < 1 || dotpos - apos < 2) {\n      errors.email = \"please enter a valid email id\";\n    }\n    this.setState({ email: e.target.value });\n  }\n\n  onChangePassword(e) {\n    let value = e.target.value;\n    let errors = this.state.errors;\n    errors.password =\n      value.length < 6 ? \"password must contain atleast  6 character\" : \"\";\n    this.setState({ password: e.target.value });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    let errors = this.state.errors;\n    if (this.state.email === \"\") {\n      errors.email = \"Can not be null\";\n    } else if (this.state.password === \"\") {\n      errors.password = \"Can not be null\";\n    } else if (this.state.errors.email.length !== 0) {\n      errors.email = this.state.errors.email;\n    } else if (this.state.errors.password.length !== 0) {\n      errors.password = this.state.errors.password;\n    }\n\n    const userObject = {\n      email: this.state.email,\n      password: this.state.password,\n    };\n\n    axios\n      .post(\"/api/auth\", userObject)\n      .then((res) => {\n        //console.log(res.data.id);\n        localStorage.setItem(\"login\", JSON.stringify(res));\n        localStorage.setItem(\"role\", res.data.role);\n        localStorage.setItem(\"id\", res.data.id);\n        localStorage.setItem(\"name\", res.data.name);\n\n        //const a = localStorage.getItem(\"role\");\n        console.log(res.data.id);\n        return this.props.history.push(\"/\");\n      })\n      .catch((error) => {\n        console.log(error.msg);\n        if (\n          this.state.errors.email.length === 0 &&\n          this.state.errors.password.length === 0\n        ) {\n          //toast.error(\"user not exists or username and password incorrect\");\n          this.setState({\n            alert_message: \"error\",\n          });\n        }\n        // alert(error.errors);\n      });\n\n    this.setState({ email: \"\", password: \"\" });\n  }\n\n  render() {\n    const { errors } = this.state;\n    return (\n      <React.Fragment>\n        <NavBar />\n\n        <div className=\"wrapper m-5 \">\n          <h1 style={{ textAlign: \"center\", color: \"ButtonShadow\" }}>Login</h1>\n\n          {this.state.alert_message === \"error\" ? <ErrorAlert /> : \"\"}\n          <form onSubmit={this.onSubmit}>\n            <div className=\"form-group m-3\">\n              <label forhtml=\"email\">Email</label>\n              <input\n                autoFocus\n                autoComplete\n                type=\"email\"\n                id=\"email\"\n                placeholder=\"Email\"\n                value={this.state.email}\n                onChange={this.onChangeEmail}\n                className=\"form-control\"\n              />\n              {errors.email ? (\n                <div className=\"alert alert-danger m-2\" role=\"alert\">\n                  {errors.email}\n                </div>\n              ) : (\n                \"\"\n              )}\n            </div>\n            <div className=\"form-group m-3 \">\n              <label forhtml=\"password\">Password</label>\n              <input\n                //autoFocus\n                autoComplete\n                type=\"password\"\n                id=\"password\"\n                placeholder=\"Password\"\n                value={this.state.password}\n                onChange={this.onChangePassword}\n                className=\"form-control\"\n              />\n              {errors.password ? (\n                <div className=\"alert alert-danger m-2\" role=\"alert\">\n                  {errors.password}\n                </div>\n              ) : (\n                \"\"\n              )}\n            </div>\n            {this.state.errors.email.length === 0 &&\n            this.state.errors.password.length === 0 ? (\n              <div className=\"form-group m-3\">\n                <input\n                  type=\"submit\"\n                  value=\"Login\"\n                  className=\"btn btn-success\"\n                />\n              </div>\n            ) : (\n              <div className=\"form-group m-3\">\n                <input\n                  type=\"submit\"\n                  value=\"Login\"\n                  disabled=\"true\"\n                  className=\"btn btn-success\"\n                />\n              </div>\n            )}\n\n            <div>\n              <Link to=\"/forget-password\">Forget Password</Link>\n              <hr /> New_User ?<Link to=\"/register\">Register</Link>\n            </div>\n          </form>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}