{"ast":null,"code":"import _objectSpread from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import\"bootstrap/dist/css/bootstrap.css\";import Pagination from\"./Pagination\";import{Paginate}from\"./util/Paginate\";import{Link}from\"react-router-dom\";//import Toggle from \"./Toggle\";\nimport NavBar from\"./NavBar\";//import Register from \"./Register\";\nimport user from\"../user.json\";import swal from\"sweetalert2\";import _ from\"lodash\";import{FcDown,FcUp}from\"react-icons/fc\";var UserList=/*#__PURE__*/function(_Component){_inherits(UserList,_Component);var _super=_createSuper(UserList);function UserList(){var _this;_classCallCheck(this,UserList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={user:[],currentPage:1,pageSize:4,count:0,sortColumn:{path:\"name\",order:\"asc\"}//checked: false,\n// isEnable: true,\n};_this.handleDelete=function(id){swal.fire({title:\"Are you sure?\",text:\"You won't be able to revert this\",type:\"warning\",showCancelButton:true,confirmButtonColor:\"red\",cancelButtonColor:\"grey\",confirmButtonText:\"Yes,delete it!\"}).then(function(result){if(result.value){_this.deleteUser(id);}});};_this.deleteUser=function(user_id){// this.opensweetalertdanger();\n// console.log(user_id);\naxios.delete(\"/api/users/\".concat(user_id)).then(function(res){var users=_this.state.user.filter(function(c){return c.id!==user_id;});//console.log(users);\n_this.setState({user:users});//console.log(this.state.user);\nswal.fire(\" successfully Deleted\");}).catch(function(error){swal.fire(\"Something went wrong\");});};_this.control=function(id){_this.setState({count:_this.state.count+1});// return this.state.count;\n};_this.handlePageChange=function(page){_this.setState({currentPage:page});};_this.sortBy=function(path){var sortColumn=_objectSpread({},_this.state.sortColumn);if(sortColumn.path===path){sortColumn.order=sortColumn.order===\"asc\"?\"desc\":\"asc\";}else{sortColumn.path=path;sortColumn.order=\"asc\";}_this.setState({sortColumn:sortColumn});};return _this;}_createClass(UserList,[{key:\"componentDidMount\",//Button Click Function\nvalue:function componentDidMount(){var _this2=this;axios.get(\"/api/users\").then(function(response){//this.state.movie = response.data;\n_this2.setState({user:response.data});console.log(user);//console.log(response.data);\n}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,pageSize=_this$state.pageSize,currentPage=_this$state.currentPage,alluser=_this$state.user,sortColumn=_this$state.sortColumn;var sorted=_.orderBy(alluser,[sortColumn.path],[sortColumn.order]);var user=Paginate(sorted,currentPage,pageSize);return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(NavBar,null),/*#__PURE__*/React.createElement(\"table\",{className:\"table table-bordered table-hover table-lg w-20 p-2 m-3\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"table-warning\"},/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",onClick:function onClick(){return _this3.sortBy(\"name\");}},\"Name \",sortColumn.order===\"asc\"?/*#__PURE__*/React.createElement(FcUp,null):/*#__PURE__*/React.createElement(FcDown,null)),/*#__PURE__*/React.createElement(\"th\",null,\"Email\"),/*#__PURE__*/React.createElement(\"th\",null,\"Role\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Delete\"),/*#__PURE__*/React.createElement(\"th\",null,\"Edit\"))),/*#__PURE__*/React.createElement(\"tbody\",null,user.map(function(u,i){return/*#__PURE__*/React.createElement(\"tr\",{key:i},/*#__PURE__*/React.createElement(\"td\",null,u.name),/*#__PURE__*/React.createElement(\"td\",null,u.email),/*#__PURE__*/React.createElement(\"td\",null,u.role),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-danger float-right\",onClick:function onClick(){_this3.handleDelete(u.id);}},\"Delete\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Link,{to:\"/edit/\".concat(u.id)},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-success float-right\"},\"Edit\"))));}))),/*#__PURE__*/React.createElement(Pagination,{itemsCount:this.state.user.length,pageSize:this.state.pageSize,currentPage:this.state.currentPage,onPageChange:this.handlePageChange})));}}]);return UserList;}(Component);export default UserList;","map":{"version":3,"sources":["/home/rudra/Documents/Library-sql/frontend/src/components/UserList.jsx"],"names":["React","Component","axios","Pagination","Paginate","Link","NavBar","user","swal","_","FcDown","FcUp","UserList","state","currentPage","pageSize","count","sortColumn","path","order","handleDelete","id","fire","title","text","type","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","value","deleteUser","user_id","delete","res","users","filter","c","setState","catch","error","control","handlePageChange","page","sortBy","get","response","data","console","log","alluser","sorted","orderBy","map","u","i","name","email","role","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nimport axios from \"axios\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport Pagination from \"./Pagination\";\nimport { Paginate } from \"./util/Paginate\";\nimport { Link } from \"react-router-dom\";\n//import Toggle from \"./Toggle\";\nimport NavBar from \"./NavBar\";\n//import Register from \"./Register\";\nimport user from \"../user.json\";\nimport swal from \"sweetalert2\";\nimport _ from \"lodash\";\nimport { FcDown, FcUp } from \"react-icons/fc\";\nclass UserList extends Component {\n  state = {\n    user: [],\n    currentPage: 1,\n    pageSize: 4,\n    count: 0,\n    sortColumn: { path: \"name\", order: \"asc\" },\n    //checked: false,\n    // isEnable: true,\n  };\n\n  handleDelete = (id) => {\n    swal\n      .fire({\n        title: \"Are you sure?\",\n        text: \"You won't be able to revert this\",\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"red\",\n        cancelButtonColor: \"grey\",\n        confirmButtonText: \"Yes,delete it!\",\n      })\n      .then((result) => {\n        if (result.value) {\n          this.deleteUser(id);\n        }\n      });\n  };\n  //Button Click Function\n\n  componentDidMount() {\n    axios\n      .get(\"/api/users\")\n      .then((response) => {\n        //this.state.movie = response.data;\n        this.setState({ user: response.data });\n        console.log(user);\n        //console.log(response.data);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n  deleteUser = (user_id) => {\n    // this.opensweetalertdanger();\n   // console.log(user_id);\n    axios\n      .delete(`/api/users/${user_id}`)\n      .then((res) => {\n        const users = this.state.user.filter((c) => c.id !== user_id);\n        //console.log(users);\n        this.setState({ user: users });\n        //console.log(this.state.user);\n        swal.fire(\" successfully Deleted\");\n      })\n      .catch((error) => {\n        swal.fire(\"Something went wrong\");\n      });\n  };\n\n  ///editUser = (id) => {};\n  /*  disableUser = (id) => {\n    axios.put(`http://localhost:9500/api/users/${id}`).then((res) => {\n      //console.log(res.data);\n      return this.props.history.push(\"/login\");\n      //this.setState({ count: this.state.count + 1 });\n    });\n  };\n*/\n  //componentDidMount(){}\n  control = (id) => {\n    this.setState({ count: this.state.count + 1 });\n    // return this.state.count;\n  };\n\n  handlePageChange = (page) => {\n    this.setState({ currentPage: page });\n  };\n  sortBy = (path) => {\n    const sortColumn = { ...this.state.sortColumn };\n    if (sortColumn.path === path) {\n      sortColumn.order = sortColumn.order === \"asc\" ? \"desc\" : \"asc\";\n    } else {\n      sortColumn.path = path;\n      sortColumn.order = \"asc\";\n    }\n    this.setState({ sortColumn });\n  };\n  render() {\n    const { pageSize, currentPage, user: alluser, sortColumn } = this.state;\n    const sorted = _.orderBy(alluser, [sortColumn.path], [sortColumn.order]);\n    const user = Paginate(sorted, currentPage, pageSize);\n    return (\n      <div className=\"App\">\n        <React.Fragment>\n          <NavBar />\n          <table className=\"table table-bordered table-hover table-lg w-20 p-2 m-3\">\n            <thead>\n              <tr className=\"table-warning\">\n                <th scope=\"col\" onClick={() => this.sortBy(\"name\")}>\n                  Name {sortColumn.order === \"asc\" ? <FcUp /> : <FcDown />}\n                </th>\n                <th>Email</th>\n                <th>Role</th>\n                <th scope=\"col\">Delete</th>\n                <th>Edit</th>\n              </tr>\n            </thead>\n            <tbody>\n              {user.map((u, i) => {\n                return (\n                  <tr key={i}>\n                    <td>{u.name}</td>\n                    <td>{u.email}</td>\n                    <td>{u.role}</td>\n\n                    <td>\n                      <button\n                        type=\"button\"\n                        className=\"btn btn-danger float-right\"\n                        onClick={() => {\n                          this.handleDelete(u.id);\n                        }}\n                      >\n                        Delete\n                      </button>\n                    </td>\n                    <td>\n                      <Link to={`/edit/${u.id}`}>\n                        <button\n                          type=\"button\"\n                          className=\"btn btn-success float-right\"\n                        >\n                          Edit\n                        </button>\n                      </Link>\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n          <Pagination\n            itemsCount={this.state.user.length}\n            pageSize={this.state.pageSize}\n            currentPage={this.state.currentPage}\n            onPageChange={this.handlePageChange}\n          />\n        </React.Fragment>\n      </div>\n    );\n  }\n}\n\nexport default UserList;\n"]},"metadata":{},"sourceType":"module"}