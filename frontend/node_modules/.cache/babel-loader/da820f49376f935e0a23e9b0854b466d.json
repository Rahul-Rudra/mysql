{"ast":null,"code":"var _jsxFileName = \"/home/rudra/Documents/Library-sql/frontend/src/components/Reset.jsx\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nexport default class Reset extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleInput = e => {\n      e.preventDefault();\n      let value = e.target.value;\n      const name = e.target.name;\n      let errors = this.state.errors;\n      errors.password = value.length < 6 ? \"password must contain atleast  6 character\" : \"\"; //const name = e.target.name;\n      // const value = e.target.value;\n\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleForm = e => {\n      e.preventDefault();\n\n      if (this.state.email === \"\") {\n        alert(\"Email is Required\");\n        return false;\n      } // const data = { email: this.state.email, };\n      // console.log(data)\n\n\n      axios.post(\"/forget-password/updatePassword\", this.state).then(result => {\n        alert(result.data.msg);\n        console.log(result.data.msg);\n        return this.props.history.push(\"/login\");\n      }).catch(err => {\n        if (err.response && err.response.status === 404) alert(err.response.data.msg);else alert(\"Something Went Wrong\");\n        this.setState({\n          errors: err.response\n        });\n      });\n    };\n\n    this.state = {\n      linkDate: \"\",\n      email: \"\",\n      password: \"\",\n      confirm_password: \"\",\n      errors: {\n        password: \"\"\n      }\n    };\n  }\n\n  componentDidMount() {\n    let slugParam = this.props.match.params.slug;\n    let splitSlug = slugParam.split(\"+++\");\n    let reqDate = splitSlug[0];\n    let email = splitSlug[1];\n    let token = splitSlug[2];\n    console.log(reqDate);\n    console.log(email);\n    this.setState({\n      email: email,\n      linkDate: reqDate,\n      token: token\n    });\n    let date1 = new Date(reqDate);\n    let currentDate = new Date();\n    console.log(date1);\n    console.log(currentDate);\n    let differenceinMS = currentDate - date1;\n\n    if (differenceinMS > 36000) {\n      alert(\"Link Not Valid link will be valid for 30 min.Please sent the reset link Again\");\n      this.props.history.push(\"/login\");\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      style: {\n        marginTop: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }\n    }, \"Reset Password\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      value: this.state.password,\n      onChange: this.handleInput,\n      className: \"form-control\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }\n    })), this.state.errors.password, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }\n    }, \"Confirm Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      name: \"confirm_password\",\n      value: this.state.confirm_password,\n      onChange: this.handleInput,\n      className: \"form-control\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-footer text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"button\",\n      value: \"Reset\",\n      onClick: this.handleForm,\n      className: \"btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 19\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}","map":{"version":3,"sources":["/home/rudra/Documents/Library-sql/frontend/src/components/Reset.jsx"],"names":["React","Component","axios","Reset","constructor","props","handleInput","e","preventDefault","value","target","name","errors","state","password","length","setState","handleForm","email","alert","post","then","result","data","msg","console","log","history","push","catch","err","response","status","linkDate","confirm_password","componentDidMount","slugParam","match","params","slug","splitSlug","split","reqDate","token","date1","Date","currentDate","differenceinMS","render","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\n\nexport default class Reset extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      linkDate: \"\",\n      email: \"\",\n      password: \"\",\n      confirm_password: \"\",\n      errors: {\n        password: \"\",\n      },\n    };\n  }\n  componentDidMount() {\n    let slugParam = this.props.match.params.slug;\n    let splitSlug = slugParam.split(\"+++\");\n    let reqDate = splitSlug[0];\n    let email = splitSlug[1];\n    let token = splitSlug[2];\n    console.log(reqDate);\n    console.log(email);\n    this.setState({ email: email, linkDate: reqDate, token: token });\n    let date1 = new Date(reqDate);\n    let currentDate = new Date();\n    console.log(date1);\n    console.log(currentDate);\n    let differenceinMS = currentDate - date1;\n    if (differenceinMS > 36000) {\n      alert(\n        \"Link Not Valid link will be valid for 30 min.Please sent the reset link Again\"\n      );\n      this.props.history.push(\"/login\");\n    }\n  }\n  handleInput = (e) => {\n    e.preventDefault();\n    let value = e.target.value;\n    const name = e.target.name;\n    let errors = this.state.errors;\n    errors.password =\n      value.length < 6 ? \"password must contain atleast  6 character\" : \"\";\n    //const name = e.target.name;\n    // const value = e.target.value;\n    this.setState({ [name]: value });\n  };\n  handleForm = (e) => {\n    e.preventDefault();\n    if (this.state.email === \"\") {\n      alert(\"Email is Required\");\n      return false;\n    }\n    // const data = { email: this.state.email, };\n    // console.log(data)\n    axios\n      .post(\"/forget-password/updatePassword\", this.state)\n      .then((result) => {\n        alert(result.data.msg);\n        console.log(result.data.msg);\n        return this.props.history.push(\"/login\");\n      })\n      .catch((err) => {\n        if (err.response && err.response.status === 404)\n          alert(err.response.data.msg);\n        else alert(\"Something Went Wrong\");\n        this.setState({ errors: err.response });\n      });\n  };\n  render() {\n    return (\n      <div className=\"content\">\n        <form onSubmit={this.handleForm}>\n          <div className=\"row\" style={{ marginTop: 20 }}>\n            <div className=\"col-sm-3\"></div>\n            <div className=\"col-sm-6\">\n              <div className=\"card\">\n                <div className=\"card-header text-center\">Reset Password</div>\n                <div className=\"card-body\">\n                  <div className=\"form-group\">\n                    <label>Password</label>\n                    <input\n                      type=\"password\"\n                      name=\"password\"\n                      value={this.state.password}\n                      onChange={this.handleInput}\n                      className=\"form-control\"\n                    />\n                  </div>\n                  {this.state.errors.password}\n                  <div className=\"form-group\">\n                    <label>Confirm Password</label>\n                    <input\n                      type=\"password\"\n                      name=\"confirm_password\"\n                      value={this.state.confirm_password}\n                      onChange={this.handleInput}\n                      className=\"form-control\"\n                    />\n                  </div>\n                </div>\n                <div className=\"card-footer text-center\">\n                  <input\n                    type=\"button\"\n                    value=\"Reset\"\n                    onClick={this.handleForm}\n                    className=\"btn btn-primary\"\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"col-sm-3\"></div>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}