{"ast":null,"code":"import _defineProperty from\"/home/rudra/Documents/backendforget/frontend/lms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/rudra/Documents/backendforget/frontend/lms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/rudra/Documents/backendforget/frontend/lms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/rudra/Documents/backendforget/frontend/lms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/rudra/Documents/backendforget/frontend/lms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import{NotificationContainer,NotificationManager}from\"react-notifications\";var Reset=/*#__PURE__*/function(_Component){_inherits(Reset,_Component);var _super=_createSuper(Reset);function Reset(props){var _this;_classCallCheck(this,Reset);_this=_super.call(this,props);_this.handleInput=function(e){e.preventDefault();var name=e.target.name;var value=e.target.value;_this.setState(_defineProperty({},name,value));};_this.handleForm=function(e){e.preventDefault();if(_this.state.email===\"\"){alert(\"Email is Required\");return false;}// const data = { email: this.state.email, };\n// console.log(data)\naxios.post(\"/forget-password/updatePassword\",_this.state).then(function(result){alert(result.data.msg);console.log(result.data.msg);return _this.props.history.push(\"/login\");}).catch(function(err){if(err.response&&err.response.status===404)alert(err.response.data.msg);else alert(\"Something Went Wrong\");_this.setState({errors:err.response});});};_this.state={linkDate:\"\",email:\"\",password:\"\",confirm_password:\"\",errors:{}};return _this;}_createClass(Reset,[{key:\"componentDidMount\",value:function componentDidMount(){var slugParam=this.props.match.params.slug;var splitSlug=slugParam.split(\"+++\");var reqDate=splitSlug[0];var email=splitSlug[1];var token=splitSlug[2];console.log(reqDate);console.log(email);this.setState({email:email,linkDate:reqDate,token:token});var date1=new Date(reqDate);var currentDate=new Date();console.log(date1);console.log(currentDate);var differenceinMS=currentDate-date1;if(differenceinMS>36000){alert(\"Link Not Valid link will be valid for 30 min.Please sent the reset link Again\");this.props.history.push(\"/login\");}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleForm},/*#__PURE__*/React.createElement(\"div\",{className:\"row\",style:{marginTop:20}},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-3\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header text-center\"},\"Reset Password\"),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",value:this.state.password,onChange:this.handleInput,className:\"form-control\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Confirm Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"confirm_password\",value:this.state.confirm_password,onChange:this.handleInput,className:\"form-control\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"card-footer text-center\"},/*#__PURE__*/React.createElement(\"input\",{type:\"button\",value:\"Reset\",onClick:this.handleForm,className:\"btn btn-primary\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-3\"}))));}}]);return Reset;}(Component);export{Reset as default};","map":{"version":3,"sources":["/home/rudra/Documents/backendforget/frontend/lms/src/components/Reset.jsx"],"names":["React","Component","axios","NotificationContainer","NotificationManager","Reset","props","handleInput","e","preventDefault","name","target","value","setState","handleForm","state","email","alert","post","then","result","data","msg","console","log","history","push","catch","err","response","status","errors","linkDate","password","confirm_password","slugParam","match","params","slug","splitSlug","split","reqDate","token","date1","Date","currentDate","differenceinMS","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport {\n  NotificationContainer,\n  NotificationManager,\n} from \"react-notifications\";\n\nexport default class Reset extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      linkDate: \"\",\n      email: \"\",\n      password: \"\",\n      confirm_password: \"\",\n      errors: {},\n    };\n  }\n  componentDidMount() {\n    let slugParam = this.props.match.params.slug;\n    let splitSlug = slugParam.split(\"+++\");\n    let reqDate = splitSlug[0];\n    let email = splitSlug[1];\n    let token = splitSlug[2];\n    console.log(reqDate);\n    console.log(email);\n    this.setState({ email: email, linkDate: reqDate, token: token });\n    let date1 = new Date(reqDate);\n    let currentDate = new Date();\n    console.log(date1);\n    console.log(currentDate);\n    let differenceinMS = currentDate - date1;\n    if (differenceinMS > 36000) {\n      alert(\n        \"Link Not Valid link will be valid for 30 min.Please sent the reset link Again\"\n      );\n      this.props.history.push(\"/login\");\n    }\n  }\n  handleInput = (e) => {\n    e.preventDefault();\n    const name = e.target.name;\n    const value = e.target.value;\n    this.setState({ [name]: value });\n  };\n  handleForm = (e) => {\n    e.preventDefault();\n    if (this.state.email === \"\") {\n      alert(\"Email is Required\");\n      return false;\n    }\n    // const data = { email: this.state.email, };\n    // console.log(data)\n    axios\n      .post(\"/forget-password/updatePassword\", this.state)\n      .then((result) => {\n        alert(result.data.msg);\n        console.log(result.data.msg);\n        return this.props.history.push(\"/login\");\n      })\n      .catch((err) => {\n        if (err.response && err.response.status === 404)\n          alert(err.response.data.msg);\n        else alert(\"Something Went Wrong\");\n        this.setState({ errors: err.response });\n      });\n  };\n  render() {\n    return (\n      <div className=\"content\">\n        <form onSubmit={this.handleForm}>\n          <div className=\"row\" style={{ marginTop: 20 }}>\n            <div className=\"col-sm-3\"></div>\n            <div className=\"col-sm-6\">\n              <div className=\"card\">\n                <div className=\"card-header text-center\">Reset Password</div>\n                <div className=\"card-body\">\n                  <div className=\"form-group\">\n                    <label>Password</label>\n                    <input\n                      type=\"password\"\n                      name=\"password\"\n                      value={this.state.password}\n                      onChange={this.handleInput}\n                      className=\"form-control\"\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Confirm Password</label>\n                    <input\n                      type=\"password\"\n                      name=\"confirm_password\"\n                      value={this.state.confirm_password}\n                      onChange={this.handleInput}\n                      className=\"form-control\"\n                    />\n                  </div>\n                </div>\n                <div className=\"card-footer text-center\">\n                  <input\n                    type=\"button\"\n                    value=\"Reset\"\n                    onClick={this.handleForm}\n                    className=\"btn btn-primary\"\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"col-sm-3\"></div>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}