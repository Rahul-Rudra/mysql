{"ast":null,"code":"import _toConsumableArray from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import searchData from\"../searchData.json\";import axios from\"axios\";import\"bootstrap/dist/css/bootstrap.css\";import Pagination from\"./Pagination\";import{Paginate}from\"./util/Paginate\";import{ToastContainer,toast}from\"react-toastify\";//import Toggle from \"./Toggle\";\nimport NavBar from\"./NavBar\";import\"react-toastify/dist/ReactToastify.css\";//import { response } from \"express\";\n//import user from \"../../../controllers/user\";\nimport book from\"../book.json\";import _ from\"lodash\";import swal from\"sweetalert2\";import{FcDown,FcUp}from\"react-icons/fc\";var Book=/*#__PURE__*/function(_Component){_inherits(Book,_Component);var _super=_createSuper(Book);function Book(){var _this;_classCallCheck(this,Book);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={book:[],Issue:[],user:[{bookIssueInfo:[]}],searchData:null,currentPage:1,message:[],pageSize:10,count:0,bool:\"true\",s:\"btn btn-primary float-right\",s1:\"btn btn-primary float-right\",e:\"btn btn-primary float-right disabled\",pos:0,d:false,input:\"request\",disabled:[],sortColumn:{path:\"title\",order:\"asc\"}//checked: false,\n// isEnable: true,\n};_this.sortBy=function(path){var sortColumn=_objectSpread({},_this.state.sortColumn);if(sortColumn.path===path){sortColumn.order=sortColumn.order===\"asc\"?\"desc\":\"asc\";}else{sortColumn.path=path;sortColumn.order=\"asc\";}_this.setState({sortColumn:sortColumn});};_this.RequestBook=function(book_id,i){// this.disable();\nvar user_id=localStorage.getItem(\"id\");//console.log(user_id);\naxios.post(\"/api/messages/book_id/\".concat(book_id,\"/user_id/\").concat(user_id)).then(function(res){//const users = this.state.user.filter((c) => c._id !== book_id);\nconsole.log(res.data);//this.setState((this.state.pos = 1));\n// this.state.bool = false;\nres.data.len===5||res.data.st===0?toast.warning(\"You can not access more than 5 books or stock is zero\"):toast.success(\"successfully requested by you\");_this.setState({message:res.data});_this.setState({disabled:[].concat(_toConsumableArray(_this.state.disabled),[book_id])});// console.log(this.state.disabled);\n//this.setState({input:\"requested\",d:true})\n// this.setState({input:\"requested\"})\nreturn _this.props.history.push(\"/books\");//res.data.st === 0 ? toast(\"Stock is zero\") : \"\";\n}).catch(function(error){console.log(error);//toast.error(msg);\n});};_this.ReturnBook=function(book_id){var id=localStorage.getItem(\"id\");//console.log(user_id);\naxios.post(\"/api/return/book_id/\".concat(book_id,\"/user_id/\").concat(id)).then(function(res){//const users = this.state.user.filter((c) => c._id !== book_id);\nconsole.log(res.data.c);_this.setState({Issue:res.data.issue});//this.setState({ book: res.data.book });\n// this.state.bool = false;\nres.data.issue===null||res.data.c!==res.data.book_id?toast.error(\"You can not return this book first issue the book then only you can return\"):toast.success(\"successfully return by you\");//  this.setState({input:\"request\"})\nreturn _this.props.history.push(\"/books\");}).catch(function(error){console.log(error);var msg=\"You did not issued this book so first issue then only you can return\";toast.error(msg);});};_this.RenewBook=function(id){var user_id=localStorage.getItem(\"id\");//console.log(user_id);\naxios.post(\"/api/renew/book_id/\".concat(id,\"/user_id/\").concat(user_id)).then(function(res){//const users = this.state.user.filter((c) => c._id !== book_id);\nconsole.log(res.data);_this.setState({Issue:res.data});//this.state.bool = false;\nres.data.msg?toast.error(res.data.msg):toast.success(\"successfully renew by you\");}).catch(function(error){console.log(error);var msg=\"You did not issued this book so first issue then only you can renew\";toast.error(msg);});};_this.control=function(id){_this.setState({count:_this.state.count+1});// return this.state.count;\n};_this.handleDelete=function(id){swal.fire({title:\"Are you sure?\",text:\"You won't be able to revert this\",type:\"warning\",showCancelButton:true,confirmButtonColor:\"red\",cancelButtonColor:\"grey\",confirmButtonText:\"Yes,delete it!\"}).then(function(result){if(result.value){_this.deleteUser(id);}});};_this.deleteUser=function(id){// this.opensweetalertdanger();\naxios.delete(\"/api/books/\".concat(id)).then(function(res){var books=_this.state.book.filter(function(c){return c.book_id!==id;});// console.log(books);\n_this.setState({book:books});//console.log(book);\nswal.fire(\" successfully Deleted\");}).catch(function(error){swal.fire(\"Something went wrong\");});};_this.handlePageChange=function(page){_this.setState({currentPage:page});};return _this;}_createClass(Book,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;//this.search();\naxios.get(\"/api/books\").then(function(response){//this.state.movie = response.data;\n_this2.setState({book:_toConsumableArray(response.data)});console.log(response.data);}).catch(function(error){console.log(error);});}},{key:\"search\",value:function search(key){var _this3=this;axios.get(\"/api/books/search?title=\"+key).then(function(response){//this.state.movie = response.data;\n_this3.setState({searchData:response.data});console.log(searchData);console.log(response.data);}).catch(function(error){console.log(error);});// this.setState({searchData:\"\"});\n}//updateUser = (id) => {};\n/*  disableUser = (id) => {\n    axios.put(`http://localhost:9500/api/books/${id}`).then((res) => {\n      //console.log(res.data);\n      return this.props.history.push(\"/login\");\n      //this.setState({ count: this.state.count + 1 });\n    });\n  };\n*/},{key:\"render\",value:function render(){var _this4=this;var _this$state=this.state,pageSize=_this$state.pageSize,currentPage=_this$state.currentPage,allbook=_this$state.book,sortColumn=_this$state.sortColumn;var sorted=_.orderBy(allbook,[sortColumn.path],[sortColumn.order]);var book=Paginate(sorted,currentPage,pageSize);//const searchData = Paginate(sorted1, currentPage, pageSize);\n//const { user } = this.state;\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ToastContainer,null),/*#__PURE__*/React.createElement(NavBar,null),localStorage.getItem(\"login\")&&localStorage.getItem(\"role\")===\"superAdmin\"?/*#__PURE__*/React.createElement(Link,{to:\"/addbooks\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"AddBook\",className:\"btn btn-info mt-2\"})):\"\",/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"h3\",null,\"Search\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Book Name\",className:\"form-control-sm ml-5\",onChange:function onChange(event){return _this4.search(event.target.value);}}),this.state.searchData?/*#__PURE__*/React.createElement(\"table\",{className:\"table table-bordered table-hover table-lg  p-2 m-2\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"table-warning\"},/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Title\"),/*#__PURE__*/React.createElement(\"th\",null,\"ISBN\"),/*#__PURE__*/React.createElement(\"th\",null,\"Stock\"),/*#__PURE__*/React.createElement(\"th\",null,\"Author\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Issue\"),/*#__PURE__*/React.createElement(\"th\",null,\"Return\"),/*#__PURE__*/React.createElement(\"th\",null,\"Renew\"),localStorage.getItem(\"role\")===\"superAdmin\"?/*#__PURE__*/React.createElement(\"th\",null,\"Delete\"):\"\")),/*#__PURE__*/React.createElement(\"tbody\",null,this.state.searchData.map(function(u,i){var id=localStorage.getItem(\"id\");var id1=u.user_id;return/*#__PURE__*/React.createElement(\"tr\",{key:i},/*#__PURE__*/React.createElement(\"td\",null,u.title),/*#__PURE__*/React.createElement(\"td\",null,u.ISBN),/*#__PURE__*/React.createElement(\"td\",null,u.stock),/*#__PURE__*/React.createElement(\"td\",null,u.author),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",key:u.book_id// disabled={this.state.d}\n//className={this.state.s1}\n,disabled:_this4.state.disabled.indexOf(u.book_id)!==-1||u.stock===0,onClick:function onClick(){_this4.RequestBook(u._id);},className:id1==id||u.stock===0?_this4.state.e:_this4.state.s},_this4.state.input)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\"// disabled={  u.user_id===id ||\n//  u.stock === 0?\"true\":\"false\"}\n,disabled:id1!=id,className://id1==id || u.stock===0?this.state.s: \n_this4.state.s,onClick:function onClick(){_this4.ReturnBook(u._id);}},\"Return\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\"//className={this.state.s}\n//disabled={  u.user_id===id ?\"false\":\"true\"}\n,disabled:id1!=id,onClick:function onClick(){_this4.RenewBook(u.book_id);},className://   id1==id || u.stock===0?this.state.s: \n_this4.state.s},\"Return\")),localStorage.getItem(\"role\")===\"superAdmin\"?/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-danger float-right\",onClick:function onClick(){_this4.handleDelete(u.book_id);}},\"Delete\")):\"\");}))):/*#__PURE__*/React.createElement(\"table\",{className:\"table table-bordered table-hover table-lg  p-1 mt-2\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"table-warning\"},/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",onClick:function onClick(){return _this4.sortBy(\"title\");}},\"Title\",sortColumn.order===\"asc\"?/*#__PURE__*/React.createElement(FcUp,null):/*#__PURE__*/React.createElement(FcDown,null)),/*#__PURE__*/React.createElement(\"th\",null,\"ISBN\"),/*#__PURE__*/React.createElement(\"th\",{onClick:function onClick(){return _this4.sortBy(\"stock\");}},\"Stock \",sortColumn.order===\"asc\"?/*#__PURE__*/React.createElement(FcUp,null):/*#__PURE__*/React.createElement(FcDown,null)),/*#__PURE__*/React.createElement(\"th\",{onClick:function onClick(){return _this4.sortBy(\"author\");}},\"Author\",sortColumn.order===\"asc\"?/*#__PURE__*/React.createElement(FcUp,null):/*#__PURE__*/React.createElement(FcDown,null)),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Issue\"),/*#__PURE__*/React.createElement(\"th\",null,\"Return\"),/*#__PURE__*/React.createElement(\"th\",null,\"Renew\"),localStorage.getItem(\"role\")===\"superAdmin\"?/*#__PURE__*/React.createElement(\"th\",null,\"Delete\"):\"\")),/*#__PURE__*/React.createElement(\"tbody\",null,book.map(function(u,i){//this.setState({ s: \"btn btn-primary float-right\" });\nvar id=localStorage.getItem(\"id\");var id1=u.user_id;// const r= id1==id?'true':'false';\nconsole.log(id1==id);// console.log(r);\nreturn/*#__PURE__*/React.createElement(\"tr\",{key:i},/*#__PURE__*/React.createElement(\"td\",null,u.title),/*#__PURE__*/React.createElement(\"td\",null,u.ISBN),/*#__PURE__*/React.createElement(\"td\",null,u.stock),/*#__PURE__*/React.createElement(\"td\",null,u.author),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{key:u.book_id,type:\"button\"// disabled={u.stock==0?\"true\":\"false\"}\n// disabled={this.state.input===\"requested\"?true:false}\n,disabled:_this4.state.disabled.indexOf(u.book_id)!==-1||u.stock===0,className:id1==id||u.stock===0?_this4.state.e:_this4.state.s,onClick:function onClick(){_this4.RequestBook(u.book_id);}},_this4.state.input)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\"//className={this.state.s}\n,disabled:id1!=id,onClick:function onClick(){_this4.ReturnBook(u.book_id);},className://  id1==id || u.stock===0?this.state.s: \n_this4.state.s},\"Return\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\"//className={this.state.s}\n//disabled={  u.user_id===id ?\"false\":\"true\"}\n,disabled:id1!=id,onClick:function onClick(){_this4.RenewBook(u.book_id);},className:// id1==id || u.stock===0?this.state.s: \n_this4.state.s},\"Renew\")),localStorage.getItem(\"role\")===\"superAdmin\"?/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-danger float-right\",onClick:function onClick(){_this4.handleDelete(u.book_id);}},\"Delete\")):\"\");}))),/*#__PURE__*/React.createElement(Pagination,{itemsCount:this.state.book.length,pageSize:this.state.pageSize,currentPage:this.state.currentPage,onPageChange:this.handlePageChange})));}}]);return Book;}(Component);export default Book;","map":{"version":3,"sources":["/home/rudra/Documents/Library-sql/frontend/src/components/Book.jsx"],"names":["React","Component","Link","searchData","axios","Pagination","Paginate","ToastContainer","toast","NavBar","book","_","swal","FcDown","FcUp","Book","state","Issue","user","bookIssueInfo","currentPage","message","pageSize","count","bool","s","s1","e","pos","d","input","disabled","sortColumn","path","order","sortBy","setState","RequestBook","book_id","i","user_id","localStorage","getItem","post","then","res","console","log","data","len","st","warning","success","props","history","push","catch","error","ReturnBook","id","c","issue","msg","RenewBook","control","handleDelete","fire","title","text","type","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","result","value","deleteUser","delete","books","filter","handlePageChange","page","get","response","key","allbook","sorted","orderBy","event","search","target","map","u","id1","ISBN","stock","author","indexOf","_id","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport searchData from \"../searchData.json\";\nimport axios from \"axios\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport Pagination from \"./Pagination\";\nimport { Paginate } from \"./util/Paginate\";\nimport { ToastContainer, toast } from \"react-toastify\";\n//import Toggle from \"./Toggle\";\nimport NavBar from \"./NavBar\";\nimport \"react-toastify/dist/ReactToastify.css\";\n//import { response } from \"express\";\n//import user from \"../../../controllers/user\";\nimport book from \"../book.json\";\nimport _ from \"lodash\";\nimport swal from \"sweetalert2\";\nimport { FcDown, FcUp } from \"react-icons/fc\";\nclass Book extends Component {\n  state = {\n    book: [],\n    Issue: [],\n    user: [\n      {\n        bookIssueInfo: [],\n      },\n    ],\n    searchData: null,\n    currentPage: 1,\n    message: [],\n    pageSize: 10,\n    count: 0,\n    bool: \"true\",\n    s: \"btn btn-primary float-right\",\n    s1: \"btn btn-primary float-right\",\n    e: \"btn btn-primary float-right disabled\",\n    pos: 0,\n    d: false,\n    input:\"request\",\n    disabled: [],\n    sortColumn: { path: \"title\", order: \"asc\" },\n    //checked: false,\n    // isEnable: true,\n  };\n  sortBy = (path) => {\n    const sortColumn = { ...this.state.sortColumn };\n    if (sortColumn.path === path) {\n      sortColumn.order = sortColumn.order === \"asc\" ? \"desc\" : \"asc\";\n    } else {\n      sortColumn.path = path;\n      sortColumn.order = \"asc\";\n    }\n    this.setState({ sortColumn });\n  };\n\n  componentDidMount() {\n    //this.search();\n    axios\n      .get(\"/api/books\")\n      .then((response) => {\n        //this.state.movie = response.data;\n\n        this.setState({ book: [...response.data] });\n        console.log(response.data);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  search(key) {\n    axios\n      .get(\"/api/books/search?title=\" + key)\n      .then((response) => {\n        //this.state.movie = response.data;\n\n        this.setState({ searchData: response.data });\n\n        console.log(searchData);\n        console.log(response.data);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n     // this.setState({searchData:\"\"});\n  }\n\n  //updateUser = (id) => {};\n  /*  disableUser = (id) => {\n    axios.put(`http://localhost:9500/api/books/${id}`).then((res) => {\n      //console.log(res.data);\n      return this.props.history.push(\"/login\");\n      //this.setState({ count: this.state.count + 1 });\n    });\n  };\n*/\n\n  RequestBook = (book_id, i) => {\n    // this.disable();\n    const user_id = localStorage.getItem(\"id\");\n\n    //console.log(user_id);\n    axios\n      .post(`/api/messages/book_id/${book_id}/user_id/${user_id}`)\n      .then((res) => {\n        //const users = this.state.user.filter((c) => c._id !== book_id);\n        console.log(res.data);\n\n        //this.setState((this.state.pos = 1));\n        // this.state.bool = false;\n\n        res.data.len === 5 || res.data.st === 0\n          ? toast.warning(\n              \"You can not access more than 5 books or stock is zero\"\n            )\n          : toast.success(\"successfully requested by you\");\n        this.setState({ message: res.data });\n\n        this.setState({ disabled: [...this.state.disabled, book_id] });\n       // console.log(this.state.disabled);\n      \n        //this.setState({input:\"requested\",d:true})\n\n      \n           // this.setState({input:\"requested\"})\n        return this.props.history.push(\"/books\");\n        //res.data.st === 0 ? toast(\"Stock is zero\") : \"\";\n      })\n      .catch((error) => {\n        console.log(error);\n        //toast.error(msg);\n      });\n  };\n\n  ReturnBook = (book_id) => {\n    const id = localStorage.getItem(\"id\");\n\n    //console.log(user_id);\n    axios\n      .post(`/api/return/book_id/${book_id}/user_id/${id}`)\n      .then((res) => {\n        //const users = this.state.user.filter((c) => c._id !== book_id);\n        console.log(res.data.c);\n        this.setState({ Issue: res.data.issue });\n        //this.setState({ book: res.data.book });\n        // this.state.bool = false;\n        res.data.issue === null || res.data.c !== res.data.book_id\n          ? toast.error(\n              \"You can not return this book first issue the book then only you can return\"\n            )\n          : toast.success(\"successfully return by you\");\n        //  this.setState({input:\"request\"})\n        return this.props.history.push(\"/books\");\n      })\n      .catch((error) => {\n        console.log(error);\n        const msg =\n          \"You did not issued this book so first issue then only you can return\";\n        toast.error(msg);\n      });\n  };\n  RenewBook = (id) => {\n    const user_id = localStorage.getItem(\"id\");\n\n    //console.log(user_id);\n    axios\n      .post(`/api/renew/book_id/${id}/user_id/${user_id}`)\n      .then((res) => {\n        //const users = this.state.user.filter((c) => c._id !== book_id);\n        console.log(res.data);\n        this.setState({ Issue: res.data });\n        //this.state.bool = false;\n        res.data.msg\n          ? toast.error(res.data.msg)\n          : toast.success(\"successfully renew by you\");\n      })\n      .catch((error) => {\n        console.log(error);\n        const msg =\n          \"You did not issued this book so first issue then only you can renew\";\n        toast.error(msg);\n      });\n  };\n\n  control = (id) => {\n    this.setState({ count: this.state.count + 1 });\n    // return this.state.count;\n  };\n  /*\n  getUserWithBookId = (id) => {\n    axios.get(`/api/users/book_id/:${id}`).then((response) => {\n      console.log(response.data);\n      if (response.data) {\n        this.setState({ s: \"btn btn-primary float-right\" });\n        console.log(this.state.s);\n      } else {\n        this.setState({ s: \"btn btn-primary float-right disabled\" });\n      }\n    });\n  };*/\n  handleDelete = (id) => {\n    swal\n      .fire({\n        title: \"Are you sure?\",\n        text: \"You won't be able to revert this\",\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"red\",\n        cancelButtonColor: \"grey\",\n        confirmButtonText: \"Yes,delete it!\",\n      })\n      .then((result) => {\n        if (result.value) {\n          this.deleteUser(id);\n        }\n      });\n  };\n  deleteUser = (id) => {\n    // this.opensweetalertdanger();\n    axios\n      .delete(`/api/books/${id}`)\n      .then((res) => {\n        const books = this.state.book.filter((c) => c.book_id !== id);\n       // console.log(books);\n        this.setState({ book: books });\n        //console.log(book);\n        swal.fire(\" successfully Deleted\");\n      })\n      .catch((error) => {\n        swal.fire(\"Something went wrong\");\n      });\n  };\n\n  handlePageChange = (page) => {\n    this.setState({ currentPage: page });\n  };\n\n  render() {\n    const { pageSize, currentPage, book: allbook, sortColumn } = this.state;\n\n    const sorted = _.orderBy(allbook, [sortColumn.path], [sortColumn.order]);\n    const book = Paginate(sorted, currentPage, pageSize);\n    //const searchData = Paginate(sorted1, currentPage, pageSize);\n    //const { user } = this.state;\n    return (\n      <div className=\"App\">\n        <React.Fragment>\n          <ToastContainer />\n          <NavBar />\n          {localStorage.getItem(\"login\") &&\n          localStorage.getItem(\"role\") === \"superAdmin\" ? (\n            <Link to=\"/addbooks\">\n              <input\n                type=\"submit\"\n                value=\"AddBook\"\n                className=\"btn btn-info mt-2\"\n              />\n            </Link>\n          ) : (\n            \"\"\n          )}\n          <hr />\n          <h3>Search</h3>\n          <input\n            type=\"text\"\n            placeholder=\"Book Name\"\n            className=\"form-control-sm ml-5\"\n            onChange={(event) => this.search(event.target.value)}\n          ></input>\n\n          {this.state.searchData ? (\n            <table className=\"table table-bordered table-hover table-lg  p-2 m-2\">\n              <thead>\n                <tr className=\"table-warning\">\n                  <th scope=\"col\">Title</th>\n                  <th>ISBN</th>\n                  <th>Stock</th>\n                  <th>Author</th>\n                  <th scope=\"col\">Issue</th>\n                  <th>Return</th>\n                 <th>Renew</th>\n                  {localStorage.getItem(\"role\") === \"superAdmin\" ? (\n                    <th>Delete</th>\n                  ) : (\n                    \"\"\n                  )}\n                </tr>\n              </thead>\n              <tbody>\n                {this.state.searchData.map((u, i) => {\n                  const id = localStorage.getItem(\"id\");\n                  const id1=u.user_id;\n                  return (\n                    <tr key={i}>\n                      <td>{u.title}</td>\n                      <td>{u.ISBN}</td>\n                      <td>{u.stock}</td>\n                      <td>{u.author}</td>\n\n                      <td>\n                        <button\n                          type=\"button\"\n                          key={u.book_id}\n                          // disabled={this.state.d}\n                          //className={this.state.s1}\n                          disabled={\n                            this.state.disabled.indexOf(u.book_id) !== -1 ||\n                            u.stock === 0\n                          }\n                        \n                          onClick={() => {\n                            this.RequestBook(u._id);\n                          }}\n                          className={\n                            id1==id || u.stock===0?this.state.e: \n                              this.state.s\n                          }\n                        >\n                          {this.state.input}\n                        </button>\n                      </td>\n\n                      <td>\n                        <button\n                          type=\"button\"\n                         // disabled={  u.user_id===id ||\n                          //  u.stock === 0?\"true\":\"false\"}\n                          disabled={ id1!=id}\n                          className={\n                         \n                            //id1==id || u.stock===0?this.state.s: \n                            this.state.s\n                             \n                          }\n                          onClick={() => {\n                            this.ReturnBook(u._id);\n                          }}\n                        >\n                          Return\n                        </button>\n                      </td>\n                      <td>\n                        <button\n                          type=\"button\"\n                          //className={this.state.s}\n                         //disabled={  u.user_id===id ?\"false\":\"true\"}\n                         disabled={ id1!=id}\n                          onClick={() => {\n                            this.RenewBook(u.book_id);\n                          }}\n                          className={\n                           \n                         //   id1==id || u.stock===0?this.state.s: \n                            this.state.s\n                              \n                          }\n                        >\n                          Return\n                        </button>\n                      </td>\n                      {localStorage.getItem(\"role\") === \"superAdmin\" ? (\n                        <td>\n                          <button\n                            type=\"button\"\n                            className=\"btn btn-danger float-right\"\n                            onClick={() => {\n                              this.handleDelete(u.book_id);\n                            }}\n                          >\n                            Delete\n                          </button>\n                        </td>\n                      ) : (\n                        \"\"\n                      )}\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          ) : (\n            <table className=\"table table-bordered table-hover table-lg  p-1 mt-2\">\n              <thead>\n                <tr className=\"table-warning\">\n                  <th scope=\"col\" onClick={() => this.sortBy(\"title\")}>\n                    Title{sortColumn.order === \"asc\" ? <FcUp /> : <FcDown />}\n                  </th>\n                  <th>ISBN</th>\n                  <th onClick={() => this.sortBy(\"stock\")}>\n                    Stock {sortColumn.order === \"asc\" ? <FcUp /> : <FcDown />}\n                  </th>\n                  <th onClick={() => this.sortBy(\"author\")}>\n                    Author{sortColumn.order === \"asc\" ? <FcUp /> : <FcDown />}\n                  </th>\n                  <th scope=\"col\">Issue</th>\n                  <th>Return</th>\n                 <th>Renew</th>\n                  {localStorage.getItem(\"role\") === \"superAdmin\" ? (\n                    <th>Delete</th>\n                  ) : (\n                    \"\"\n                  )}\n                </tr>\n              </thead>\n              <tbody>\n                {book.map((u, i) => {\n                  //this.setState({ s: \"btn btn-primary float-right\" });\n                  const id = localStorage.getItem(\"id\");\n                  const id1=u.user_id;\n                 // const r= id1==id?'true':'false';\n                    console.log(id1==id)\n                 // console.log(r);\n                  return (\n                    <tr key={i}>\n                      <td>{u.title}</td>\n                      <td>{u.ISBN}</td>\n                      <td>{u.stock}</td>\n                      <td>{u.author}</td>\n                      <td>\n                        <button\n                          key={u.book_id}\n                          type=\"button\"\n                      // disabled={u.stock==0?\"true\":\"false\"}\n                     // disabled={this.state.input===\"requested\"?true:false}\n                     disabled={\n                      this.state.disabled.indexOf(u.book_id) !== -1 ||\n                      u.stock === 0\n                    }\n                          className={\n                          id1==id || u.stock===0?this.state.e: \n                              this.state.s\n                          }\n                          onClick={() => {\n                            this.RequestBook(u.book_id);\n                          }}\n                        >\n                         {this.state.input}\n                        </button>\n                      </td>\n\n                      <td>\n                        <button\n                          type=\"button\"\n                          //className={this.state.s}\n                         disabled={ id1!=id}\n                          onClick={() => {\n                            this.ReturnBook(u.book_id);\n                          }}\n                          className={\n                           \n                          //  id1==id || u.stock===0?this.state.s: \n                            this.state.s\n                              \n                          }\n                        >\n                          Return\n                        </button>\n                      </td>\n                      <td>\n                        <button\n                          type=\"button\"\n                          //className={this.state.s}\n                         //disabled={  u.user_id===id ?\"false\":\"true\"}\n                         disabled={ id1!=id}\n                          onClick={() => {\n                            this.RenewBook(u.book_id);\n                          }}\n                          className={\n                           \n                           // id1==id || u.stock===0?this.state.s: \n                            this.state.s\n                              \n                          }\n                        >\n                          Renew\n                        </button>\n                      </td>\n                      {localStorage.getItem(\"role\") === \"superAdmin\" ? (\n                        <td>\n                          <button\n                            type=\"button\"\n                            className=\"btn btn-danger float-right\"\n                            onClick={() => {\n                              this.handleDelete(u.book_id);\n                            }}\n                          >\n                            Delete\n                          </button>\n                        </td>\n                      ) : (\n                        \"\"\n                      )}\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          )}\n          <Pagination\n            itemsCount={this.state.book.length}\n            pageSize={this.state.pageSize}\n            currentPage={this.state.currentPage}\n            onPageChange={this.handlePageChange}\n          />\n        </React.Fragment>\n      </div>\n    );\n  }\n}\n\nexport default Book;\n"]},"metadata":{},"sourceType":"module"}