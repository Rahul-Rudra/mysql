{"ast":null,"code":"import _defineProperty from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/rudra/Documents/Library-sql/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";var Reset=/*#__PURE__*/function(_Component){_inherits(Reset,_Component);var _super=_createSuper(Reset);function Reset(props){var _this;_classCallCheck(this,Reset);_this=_super.call(this,props);_this.handleInput=function(e){e.preventDefault();var value=e.target.value;var name=e.target.name;var errors=_this.state.errors;errors.password=value.length<6?\"password must contain atleast  6 character\":\"\";//const name = e.target.name;\n// const value = e.target.value;\n_this.setState(_defineProperty({},name,value));};_this.handleForm=function(e){e.preventDefault();if(_this.state.email===\"\"){alert(\"Email is Required\");return false;}// const data = { email: this.state.email, };\n// console.log(data)\naxios.post(\"/forget-password/updatePassword\",_this.state).then(function(result){alert(result.data.msg);console.log(result.data.msg);return _this.props.history.push(\"/login\");}).catch(function(err){if(err.response&&err.response.status===404)alert(err.response.data.msg);else alert(\"Something Went Wrong\");_this.setState({errors:err.response});});};_this.state={linkDate:\"\",email:\"\",password:\"\",confirm_password:\"\",errors:{password:\"\"}};return _this;}_createClass(Reset,[{key:\"componentDidMount\",value:function componentDidMount(){var slugParam=this.props.match.params.slug;var splitSlug=slugParam.split(\"+++\");var reqDate=splitSlug[0];var email=splitSlug[1];var token=splitSlug[2];console.log(reqDate);console.log(email);this.setState({email:email,linkDate:reqDate,token:token});var date1=new Date(reqDate);var currentDate=new Date();console.log(date1);console.log(currentDate);var differenceinMS=currentDate-date1;if(differenceinMS>36000){alert(\"Link Not Valid link will be valid for 30 min.Please sent the reset link Again\");this.props.history.push(\"/login\");}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleForm},/*#__PURE__*/React.createElement(\"div\",{className:\"row\",style:{marginTop:20}},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-3\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header text-center\"},\"Reset Password\"),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",value:this.state.password,onChange:this.handleInput,className:\"form-control\"})),this.state.errors.password,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Confirm Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"confirm_password\",value:this.state.confirm_password,onChange:this.handleInput,className:\"form-control\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"card-footer text-center\"},/*#__PURE__*/React.createElement(\"input\",{type:\"button\",value:\"Reset\",onClick:this.handleForm,className:\"btn btn-primary\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-3\"}))));}}]);return Reset;}(Component);export{Reset as default};","map":{"version":3,"sources":["/home/rudra/Documents/Library-sql/frontend/src/components/Reset.jsx"],"names":["React","Component","axios","Reset","props","handleInput","e","preventDefault","value","target","name","errors","state","password","length","setState","handleForm","email","alert","post","then","result","data","msg","console","log","history","push","catch","err","response","status","linkDate","confirm_password","slugParam","match","params","slug","splitSlug","split","reqDate","token","date1","Date","currentDate","differenceinMS","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\n\nexport default class Reset extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      linkDate: \"\",\n      email: \"\",\n      password: \"\",\n      confirm_password: \"\",\n      errors: {\n        password: \"\",\n      },\n    };\n  }\n  componentDidMount() {\n    let slugParam = this.props.match.params.slug;\n    let splitSlug = slugParam.split(\"+++\");\n    let reqDate = splitSlug[0];\n    let email = splitSlug[1];\n    let token = splitSlug[2];\n    console.log(reqDate);\n    console.log(email);\n    this.setState({ email: email, linkDate: reqDate, token: token });\n    let date1 = new Date(reqDate);\n    let currentDate = new Date();\n    console.log(date1);\n    console.log(currentDate);\n    let differenceinMS = currentDate - date1;\n    if (differenceinMS > 36000) {\n      alert(\n        \"Link Not Valid link will be valid for 30 min.Please sent the reset link Again\"\n      );\n      this.props.history.push(\"/login\");\n    }\n  }\n  handleInput = (e) => {\n    e.preventDefault();\n    let value = e.target.value;\n    const name = e.target.name;\n    let errors = this.state.errors;\n    errors.password =\n      value.length < 6 ? \"password must contain atleast  6 character\" : \"\";\n    //const name = e.target.name;\n    // const value = e.target.value;\n    this.setState({ [name]: value });\n  };\n  handleForm = (e) => {\n    e.preventDefault();\n    if (this.state.email === \"\") {\n      alert(\"Email is Required\");\n      return false;\n    }\n    // const data = { email: this.state.email, };\n    // console.log(data)\n    axios\n      .post(\"/forget-password/updatePassword\", this.state)\n      .then((result) => {\n        alert(result.data.msg);\n        console.log(result.data.msg);\n        return this.props.history.push(\"/login\");\n      })\n      .catch((err) => {\n        if (err.response && err.response.status === 404)\n          alert(err.response.data.msg);\n        else alert(\"Something Went Wrong\");\n        this.setState({ errors: err.response });\n      });\n  };\n  render() {\n    return (\n      <div className=\"content\">\n        <form onSubmit={this.handleForm}>\n          <div className=\"row\" style={{ marginTop: 20 }}>\n            <div className=\"col-sm-3\"></div>\n            <div className=\"col-sm-6\">\n              <div className=\"card\">\n                <div className=\"card-header text-center\">Reset Password</div>\n                <div className=\"card-body\">\n                  <div className=\"form-group\">\n                    <label>Password</label>\n                    <input\n                      type=\"password\"\n                      name=\"password\"\n                      value={this.state.password}\n                      onChange={this.handleInput}\n                      className=\"form-control\"\n                    />\n                  </div>\n                  {this.state.errors.password}\n                  <div className=\"form-group\">\n                    <label>Confirm Password</label>\n                    <input\n                      type=\"password\"\n                      name=\"confirm_password\"\n                      value={this.state.confirm_password}\n                      onChange={this.handleInput}\n                      className=\"form-control\"\n                    />\n                  </div>\n                </div>\n                <div className=\"card-footer text-center\">\n                  <input\n                    type=\"button\"\n                    value=\"Reset\"\n                    onClick={this.handleForm}\n                    className=\"btn btn-primary\"\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"col-sm-3\"></div>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}